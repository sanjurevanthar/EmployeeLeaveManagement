<mvc:View
  controllerName="app.controller.Employee"
  xmlns="sap.m"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns:core="sap.ui.core"
  displayBlock="true">
<App >
  <Page id="employeePage"
          title="Employee View"
          showNavButton="true"
          navButtonPress=".onBackPress">

    <VBox class="sapUiSmallMargin">
      <Title text="Leave Request Page:" level="H5" class="sapUiTinyMarginEnd"/>

      <Toolbar>
        <ToolbarSpacer />
        <Button text="New Request" press=".onCreatePress" icon="sap-icon://add" />
      </Toolbar>

      <!-- Inline Dialog for creating a leave request -->
      <Dialog id="createLeaveDialog"
              title="Create Leave Request"
              draggable="true">

        <content>
          <VBox class="sapUiSmallMargin">

            <Label text="Employee ID" />
            <Input id="inpEmployeeID" placeholder="E05" />

            <Label text="Leave Type ID" />
            <Input id="inpLeaveType" placeholder="LT02" />

            <Label text="From Date" />
            <DatePicker id="inpFromDate" displayFormat="yyyy-MM-dd" valueFormat="yyyy-MM-dd" />

            <Label text="To Date" />
            <DatePicker id="inpToDate" displayFormat="yyyy-MM-dd" valueFormat="yyyy-MM-dd" />

            <Label text="Reason" />
            <TextArea id="inpReason" rows="3" placeholder="Reason for leave" />

            <Label text="Manager Employee ID" />
            <Input id="inpManagerID" placeholder="E003" />

            <Label text="Comments (optional)" />
            <TextArea id="inpComments" rows="2" placeholder="Comments" />

          </VBox>
        </content>

        <beginButton>
          <Button text="Create" press=".onCreateConfirm" />
        </beginButton>

        <endButton>
          <Button text="Cancel" press=".onCreateCancel" />
        </endButton>

      </Dialog>
      <!-- ADD THIS BELOW YOUR DIALOG -->
<Title text="My Leave Requests" level="H6" class="sapUiSmallMarginTop" />

<HBox alignItems="Center" class="sapUiSmallMarginTop">
  <Label text="Employee ID" />
  <Input id="viewEmployeeID" width="140px" placeholder="E05" />
  <Button text="Refresh" press=".onRefreshRequests" class="sapUiSmallMarginBegin" />
</HBox>

<List id="employeeRequestsList"
      items="{employeeRequests>/items}"
      inset="false"
      noDataText="No leave requests found"
      class="sapUiSmallMarginTop">

  <CustomListItem>
    <HBox width="100%" alignItems="Start" justifyContent="SpaceBetween">

      <!-- LEFT SIDE: Based on Employee LEFT BOX -->
      <VBox width="70%" class="sapUiSmallMarginEnd">
        <Label text="Days" />
        <Text text="{= ${employeeRequests>FromDate} + ' â†’ ' + ${employeeRequests>ToDate} }"
              class="sapUiSmallMarginBottom"/>

        <Label text="Reason" />
        <Text text="{employeeRequests>Reason}" class="sapUiSmallMarginBottom"/>

        <Label text="Status" />
        <Text text="{employeeRequests>Status}" />
      </VBox>

      <!-- RIGHT SIDE: Cancel only for Pending -->
      <VBox width="28%" alignItems="End">
        <Button text="Cancel"
                type="Reject"
                visible="{= ${employeeRequests>Status} === 'Pending' }"
                press=".onCancelPress"
                width="100%"/>
      </VBox>

    </HBox>
  </CustomListItem>

</List>


    </VBox>

  </Page>
</App>
</mvc:View>
